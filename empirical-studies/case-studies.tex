\chapter{Case Studies}
\label{chapter-case-studies}

\emph{``Things to avoid: User studies. Real code. Talking to practitioners. All you'll learn is that your assumptions were all wrong, your approach won't work, and the problem is much hairier than expected. Don't let reality come between you and your publication. (15/18)"}~\citep{zeller2021_tweet_the_devils_guide_to_incremental_research_15_18}. As Bertrand Meyer observes, empirical studies are vital yet studies into processes - how practitioners work - is particularly challenging: \emph{``The difficulties are formidable."}~\citep{meyer2018_towards_empirical_answers_to_important_engineering_questions}. For each of these case studies, people and organisations needed to be convinced to share business critical and sensitive engineering data - on how and when their software fails in the real world. The help and support of all the case study participants is particularly appreciated, and similarly to the people who considered but were not able to help in the research - thank you for listening.

Case studies may provide insights that might not be achieved using other methods~\citep{rowley2002_using_case_studies_in_research}. This research includes a combination of case studies to provide as many insights as practical. The roles of the researcher include: active participant, coach, observer, and interviewer. Two of the case studies include a hackathon and demonstrate how they can use used fruitfully to address reliability issues in the respective mobile apps. The projects range in scope from small teams, such as Moodspace and LocalHalo, to larger groups -- Kiwix, Moonpig, and Catrobat -- to large-scale international businesses where 50+ developers support a single mobile app and platform combination. The projects also include opensource codebases and working practices, through closed source self-contained apps, to apps with millions of users as components in larger enterprise wide systems and services. 

\textbf{MUST-DO} integrate one or more of the tables from the \href{section-case-studies-red-thread}{case-studies' red-thread} section.

The choice of analytics includes teams who rely on analytics others gather and provide, those who minimally incorporate libraries into their apps, those who write code to actively use the analytics libraries, and even touch on organisations who roll-their-own end-to-end analytics service.

Two providers of analytics tools are also included. The first - Google - emerged when issues were discovered with the Google Play Console, used by every Android developer who releases apps in the Google Play Store, and the second - Iteratively - when they contacted me about my research and agreed to provide their insights and perspective on their approach to improve the use and value of usage analytics. Vignettes and insights from other analytics providers are also included. 

Virtually all the case studies cover the Android platform and ecosystem, which is probably the largest composite ecosystem globally (at least for the duration of this research). Some also extend to other platforms and ecosystems, and some examples have been included in this research as they help illustrate the concepts, approach, challenges, and value of the concept of improving application quality using mobile analytics also apply to those ecosystems and related technologies.

As mentioned above, two of the case studies incorporated hackathons. We found they facilitated participation by volunteers by providing a collaborative, fun, gathering where the focus was collective learning and discovery. Of the three main motivations identified in ~\citep{olesen2020_10_years_of_hackathons}, our hackathons helped structure the learning and enabled participation. They also encouraged real-time, in-person, collaboration by a group of people familiar with the software but unfamiliar with the tools and techniques of applying analytics to address failures reported by the analytics. The participants learned together, as peers, and learned quickly and effectively through the open discussions during the hackathons.

\input{case-studies/case-studies-red-thread}

%%%% Marker for Julian - continue below here %%%%
\section{Overview of Case Studies}
\label{section-overview-of-case-studies}

The case studies provide %three %MUST_DO revise the introduction once the number and characteristics of the case studies is settled.
distinct perspectives of applying Mobile Analytics to Android apps. Android apps were selected to enable the use of Google Play Console reports and analytics, including Android Vitals; nonetheless one of organisations studied chose to also include analytics in their iOS app, so this will also be covered briefly.

\begin{figure}[htbp!]
    \centering
    \includegraphics[width=10cm]{images/visual-connections-in-research.png}
    \caption{Visual Connections in my research}
    \label{fig:visual-connections-in-research}
\end{figure}

\textit{MUST-DO update this figure, it is out of date.} Figure \ref{fig:visual-connections-in-research}  aims to provide a visual overlay of the main practical elements of the research from 2018 to 2020. There are three main factors: 1) the type(s) of analytics used, 2) the development team and their apps, and 3) the progression of the case studies, as they augment what has been learned in earlier case studies.
% \akb{Why is it important to understand the timeline here - what implication does it have for understanding the research problem?}

The research started with the Kiwix~\footnote{The Kiwix project enables people to use Wikipedia and other content offline~\url{https://www.kiwix.org/en/}} set of Android apps where the app with the highest crash rate, as reported by Google's Android Vitals, was used as the experiment to see if the crash rate could be improved. By design the Kiwix apps do not include any analytics or crash reporting to minimise the digital usage footprint of these apps as they may be used in areas of the world where Wikipedia is banned, \emph{etc.} where the users may be persecuted or even imprisoned. Nonetheless, as the apps were available through Google Play (amongst many sources), the development team received ongoing reports in Google Play Console including the Android Vitals reports on various `stability' metrics as defined and applied by Google.

The Catrobat team was and is an extremely well researched and supported collection of mobile apps intended to help young people learn how to enjoy developing games visually. It was established % Removed details for the review period: "by Professor Wolfgang Slany of" 
at the TU Graz university where both undergraduate and postgraduate students actively practice software skills on the codebase. My engagement started around June 2019, and we decided jointly to pick the thornier and most complex Android app - Pocket Code - as the subject for our collaboration and research, as it had proved to have an intractable ongoing issue with the high reported crash rate and was therefore a worthy challenge for the concepts proposed in my research. We had a reference app, called Pocket Paint, which had a lower crash rate. Note: Pocket Paint was and is incorporated into Pocket Code in addition to being a standalone app.

Pocket Code already incorporated one of the most popular crash analytics library called Crashlytics. At the time, it used an older, mature version of Crashlytics branded Fabric (a business first acquired by Twitter, then by Google). I have chosen to use the term \emph{liminal}~\footnote{\url{https://www.lexico.com/en/definition/liminal}} to indicate crash reporting is something that lives in the boundary layer between the app and the operating system, or platform. Either is able to observe application crashes, and for apps where both the app and the platform capture information about crashes the two data sources can be usefully cross-referenced and compared, as my research has done.

As Pocket Code was an Android app, available in Google Play, the team also received the reports provided by Google through Google Play. These two data sources provided an interesting and rich set of research challenges. 

Relatively recently, in February 2020, the Catrobat team had to migrate their Crashlytics reporting from the Fabric service, which Google was ceasing, to Firebase, the replacement reporting service Google provided. In parallel with this migration of the reporting, the project team agreed to incorporate mobile analytics into their Android and iOS apps. They decided to use Firebase Analytics for various reasons (to be covered later in my thesis), hence the extension of the apps into app-level analytics.

The two arrows in the figure indicate an area of unplanned research: 
%
I discovered various flaws in the developer-oriented reports Google provides to app developers who make their apps available in Google Play (approximately 2.9 million apps globally). This led initially to discussions with the relevant engineering teams for Google Play and Android Vitals at Google where they confirmed various flaws. They asked for ongoing updates on my findings and requested a report which I provided. Through our interactions and discussions, I realised the merit of researching the characteristics and flaws in analytics tools, and particularly those provided by Google for Android developers. This research is ongoing and intended to continue post-PhD given the importance and relevance of the topic.

In mid-2019 several commercial Android development teams learned of my research and offered to contribute their experiences and practices of using mobile analytics in their commercial apps. These apps include app-level analytics in addition to the development teams receiving the ongoing reports Google provides automatically. The contributions of these development teams helped provide additional weight to the value and relevance of using mobile analytics to identify flaws in mobile apps and evidence of the importance developers placed on addressing quality issues gleaned through these tools.

%\yy{The practical research}{Need to complete the sentences, what is liminal? Change Kiwix/Catrobat apps to "Kiwix/Catrobat teams"? }

\begin{table}[htbp!]
    \centering
    \small
    \setlength{\tabcolsep}{4pt} %% default is 6pt
    \begin{tabular}{llrr}
      Case Study &Role of Researcher &Apps &Active Users\\
      \hline
       \href{https://play.google.com/store/apps/dev?id=9116215767541857492&hl=en_GB}{Kiwix}  &Embedded &18 &367K\\
       \href{https://play.google.com/store/apps/developer?id=Catrobat&hl=en_GB}{Catrobat} &Guide &6 &200K\\
       \href{https://play.google.com/store/apps/dev?id=7665838187257770408}{Greentech Apps} &Observed &10 &987K\\
       \href{https://play.google.com/store/apps/developer?id=Moonpig.com&hl=en_GB}{Moonpig.com} &Observed &1 &130K\\
       \href{https://play.google.com/store/apps/details?id=boundless.moodgym&hl=en_GB}{Moodspace app} &Interviewed &1 &20K\\
       \href{https://play.google.com/store/apps/details?id=com.localhalo.app&hl=en_GB}{Local Halo app} &Observed &1 &1.1K\\
       Commercial case study &Consultant &1 &1.9M\\
       Analytics tools &Various &10\textsuperscript{6} &10\textsuperscript{9} \\
    \end{tabular}
    \caption{Project teams and Commercial apps in the case studies}
    \label{tab:case_studies}
\end{table}

For the Kiwix case study, the researcher has been an intrinsic long-term member of the diffuse project team, able to work directly with the code-base and collaborate directly with the developers and ancillary members of the project team. The second phase of the case study included collaboration during a week-long hackathon, the first of two case studies that used a hackathon as part of the research. 

For the Catrobat case study, the researcher advised and assisted the project team to apply mobile analytics to their larger, older, and less reliable app: \emph{Pocket Code}. The researcher helped lead a one-day hackathon and otherwise interacted through a bug reporting tool, JIRA, discussions and using shared documents. Pocket Code also included a crash-reporting library which allowed cross-tool comparisons of reports, analytics and data. During the research, the reporting platform for the crash-reporting was migrated to a newer service which provided further insights and comparisons across and between the various mobile analytics tools.

The Greentech apps case study blends public and private sharing of their projects, they track issues in public, the codebase is private. Their active userbase is larger than the combined userbases of the Kiwix and Catrobat mobile apps. The team structure is similar to those for the Kiwix project: it is a not-for-profit foundation where donations help fund some of the development work; however many of the development team members are part-time volunteers. Their core team are in Bangladesh, distant from the Western world, and their focus is to enable native Bangla speakers to learn and study the Quran. Their priorities differ from those of most projects; the quality of their material is paramount; and they sometimes disable support for apps that have serious quality flaws in these materials. 

For the commercial app teams (Moonpig, Moodspace, and LocalHalo), the researcher corresponded with one of the development team for each of the commercial apps and received either direct access to their analytics tools (LocalHalo), or was provided with snapshots (Moonpig and Moodspace). Permission was granted by their respective organisations for their contributions to be used for research purposes.

The corporate case study has an order of magnitude more complexity than the other apps with much higher demands on the software being reliable and performant. The business and the service provided through the client apps are expected to grow massively as the product matures and the software quality improves. While they include clients for MacOS, iOS, Android, webRTC, and Windows desktop operating systems, the case study focuses on the Android client.

How developers of Android apps actually use mobile analytics for remote logging compared to how developers use local logging focuses on the perceived purpose of the logging across over 100 opensource projects on GitHub.com. And the final case study is from the perspective of a startup who are developing and researching tools and techniques to help developers improve their design, implementation and use of usage analytics tools (both web and mobile apps). 

\subsection{TODO: Structure used to describe the case studies}
TODO describe Arosha's proposed structure and introduce its applicability and purpose here.


\section{Research ethics for the case studies}
\label{section-research-ethics-for-the-case-studies}

MUST-DO complete this section and have it cross checked with my supervisors.

\begin{itemize}
    \item Ethics review for Workshop in Poland (and then for various reasons the contents of the workshop were not viable because of the effects of COVID-19.
    \item No other human subjects, the data related to apps and how the app is used and performs, humans are not the subject of the research.
    \item Opensource, freely available apps without any restrictions on sharing the findings of the performance of the apps. No PII information collected by the analytics tools used.
    \item Semi-structured interviews with various individuals 
\end{itemize}

Participants were briefed and gave their permission either individually or on behalf of their organisations to use the material they freely provided. Several have reviewed my research and provided constructive feedback which has been applied. It has not always been practical to reach them, for instance some are no longer reachable. None of the analytics information provided contains PII. 
\clearpage

\input{case-studies/kiwix-team-case-study}
\clearpage

\input{case-studies/catrobat-case-study}
\clearpage

\input{case-studies/gtaf-case-study}
\clearpage

\input{case-studies/developers-experiences-of-mobile-analytics}
\clearpage

\input{case-studies/major-corporations}
\clearpage

\input{case-studies/logging-case-studies}
\clearpage

\input{case-studies/iteratively-case-study}
\clearpage

\input{case-studies/some-examples}
\clearpage

\input{case-studies/summary-of-case-studies}
\clearpage